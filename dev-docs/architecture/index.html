<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Automated DICOM Transfer - A Swiss army knife to exchange DICOM data between various systems"><meta name=author content="CCI Bonn"><link href=https://openradx.github.io/adit/dev-docs/architecture/ rel=canonical><link href=../contributing/ rel=prev><link href=../core_components/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Architecture - ADIT Documentation</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#adit-architecture-documentation class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="ADIT Documentation" class="md-header__button md-logo" aria-label="ADIT Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ADIT Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Architecture </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=green data-md-color-accent=cyan aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/openradx/adit title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> openradx/adit </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../user-docs/admin-guide/ class=md-tabs__link> User Documentation </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../contributing/ class=md-tabs__link> Developer Documentation </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="ADIT Documentation" class="md-nav__button md-logo" aria-label="ADIT Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> ADIT Documentation </label> <div class=md-nav__source> <a href=https://github.com/openradx/adit title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> openradx/adit </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> User Documentation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> User Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../user-docs/admin-guide/ class=md-nav__link> <span class=md-ellipsis> Admin Guide </span> </a> </li> <li class=md-nav__item> <a href=../../user-docs/user-guide/ class=md-nav__link> <span class=md-ellipsis> User Guide </span> </a> </li> <li class=md-nav__item> <a href=../../user-docs/technical-overview/ class=md-nav__link> <span class=md-ellipsis> Technical Overview </span> </a> </li> <li class=md-nav__item> <a href=../../user-docs/features/ class=md-nav__link> <span class=md-ellipsis> Features </span> </a> </li> <li class=md-nav__item> <a href=../../user-docs/faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Developer Documentation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Developer Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Architecture </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#system-overview class=md-nav__link> <span class=md-ellipsis> System Overview </span> </a> </li> <li class=md-nav__item> <a href=#high-level-architecture class=md-nav__link> <span class=md-ellipsis> High-Level Architecture </span> </a> </li> <li class=md-nav__item> <a href=#backend-architecture class=md-nav__link> <span class=md-ellipsis> Backend Architecture </span> </a> <nav class=md-nav aria-label="Backend Architecture"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#procrastinate-task-queue-system class=md-nav__link> <span class=md-ellipsis> Procrastinate Task Queue System </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#orthanc-integration class=md-nav__link> <span class=md-ellipsis> Orthanc Integration </span> </a> </li> <li class=md-nav__item> <a href=#dicom-libraries class=md-nav__link> <span class=md-ellipsis> DICOM Libraries </span> </a> </li> <li class=md-nav__item> <a href=#frontend-architecture class=md-nav__link> <span class=md-ellipsis> Frontend Architecture </span> </a> </li> <li class=md-nav__item> <a href=#docker-container-architecture class=md-nav__link> <span class=md-ellipsis> Docker Container Architecture </span> </a> <nav class=md-nav aria-label="Docker Container Architecture"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#container-types class=md-nav__link> <span class=md-ellipsis> Container Types </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#application-architecture class=md-nav__link> <span class=md-ellipsis> Application Architecture </span> </a> <nav class=md-nav aria-label="Application Architecture"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#core-django-apps-structure class=md-nav__link> <span class=md-ellipsis> Core Django Apps Structure </span> </a> <nav class=md-nav aria-label="Core Django Apps Structure"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#core-app-aditcore class=md-nav__link> <span class=md-ellipsis> Core App (adit.core) </span> </a> </li> <li class=md-nav__item> <a href=#transfer-apps class=md-nav__link> <span class=md-ellipsis> Transfer Apps </span> </a> </li> <li class=md-nav__item> <a href=#exploration-discovery class=md-nav__link> <span class=md-ellipsis> Exploration &amp; Discovery </span> </a> </li> <li class=md-nav__item> <a href=#upload-system-aditupload class=md-nav__link> <span class=md-ellipsis> Upload System (adit.upload) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#primary-models class=md-nav__link> <span class=md-ellipsis> Primary Models </span> </a> <nav class=md-nav aria-label="Primary Models"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#user-management class=md-nav__link> <span class=md-ellipsis> User Management </span> </a> </li> <li class=md-nav__item> <a href=#transfer-operations class=md-nav__link> <span class=md-ellipsis> Transfer Operations </span> </a> </li> <li class=md-nav__item> <a href=#dicom-configuration class=md-nav__link> <span class=md-ellipsis> DICOM Configuration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#related-projects class=md-nav__link> <span class=md-ellipsis> Related Projects </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../core_components/ class=md-nav__link> <span class=md-ellipsis> Core Components </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#system-overview class=md-nav__link> <span class=md-ellipsis> System Overview </span> </a> </li> <li class=md-nav__item> <a href=#high-level-architecture class=md-nav__link> <span class=md-ellipsis> High-Level Architecture </span> </a> </li> <li class=md-nav__item> <a href=#backend-architecture class=md-nav__link> <span class=md-ellipsis> Backend Architecture </span> </a> <nav class=md-nav aria-label="Backend Architecture"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#procrastinate-task-queue-system class=md-nav__link> <span class=md-ellipsis> Procrastinate Task Queue System </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#orthanc-integration class=md-nav__link> <span class=md-ellipsis> Orthanc Integration </span> </a> </li> <li class=md-nav__item> <a href=#dicom-libraries class=md-nav__link> <span class=md-ellipsis> DICOM Libraries </span> </a> </li> <li class=md-nav__item> <a href=#frontend-architecture class=md-nav__link> <span class=md-ellipsis> Frontend Architecture </span> </a> </li> <li class=md-nav__item> <a href=#docker-container-architecture class=md-nav__link> <span class=md-ellipsis> Docker Container Architecture </span> </a> <nav class=md-nav aria-label="Docker Container Architecture"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#container-types class=md-nav__link> <span class=md-ellipsis> Container Types </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#application-architecture class=md-nav__link> <span class=md-ellipsis> Application Architecture </span> </a> <nav class=md-nav aria-label="Application Architecture"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#core-django-apps-structure class=md-nav__link> <span class=md-ellipsis> Core Django Apps Structure </span> </a> <nav class=md-nav aria-label="Core Django Apps Structure"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#core-app-aditcore class=md-nav__link> <span class=md-ellipsis> Core App (adit.core) </span> </a> </li> <li class=md-nav__item> <a href=#transfer-apps class=md-nav__link> <span class=md-ellipsis> Transfer Apps </span> </a> </li> <li class=md-nav__item> <a href=#exploration-discovery class=md-nav__link> <span class=md-ellipsis> Exploration &amp; Discovery </span> </a> </li> <li class=md-nav__item> <a href=#upload-system-aditupload class=md-nav__link> <span class=md-ellipsis> Upload System (adit.upload) </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#primary-models class=md-nav__link> <span class=md-ellipsis> Primary Models </span> </a> <nav class=md-nav aria-label="Primary Models"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#user-management class=md-nav__link> <span class=md-ellipsis> User Management </span> </a> </li> <li class=md-nav__item> <a href=#transfer-operations class=md-nav__link> <span class=md-ellipsis> Transfer Operations </span> </a> </li> <li class=md-nav__item> <a href=#dicom-configuration class=md-nav__link> <span class=md-ellipsis> DICOM Configuration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#related-projects class=md-nav__link> <span class=md-ellipsis> Related Projects </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <nav class=md-path aria-label=Navigation> <ol class=md-path__list> <li class=md-path__item> <a href=../.. class=md-path__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-path__item> <a href=../contributing/ class=md-path__link> <span class=md-ellipsis> Developer Documentation </span> </a> </li> </ol> </nav> <article class="md-content__inner md-typeset"> <a href=https://github.com/openradx/adit/edit/main/docs/dev-docs/architecture.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/openradx/adit/raw/main/docs/dev-docs/architecture.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1 id=adit-architecture-documentation><strong>ADIT Architecture Documentation</strong><a class=headerlink href=#adit-architecture-documentation title="Permanent link">&para;</a></h1> <p>This document provides a comprehensive overview of ADIT's architecture, implementation details, and key components for developers.</p> <h2 id=system-overview>System Overview<a class=headerlink href=#system-overview title="Permanent link">&para;</a></h2> <p>ADIT (Automated DICOM Transfer) is a full-stack web application designed for automated DICOM transfers. The system consists of a Django-based backend, PostgreSQL database, and server-side rendered web interface enhanced with HTMX for dynamic interactions.</p> <p>ADIT inherits common functionality from <strong><a href=https://github.com/openradx/adit-radis-shared>ADIT Radis Shared</a></strong>, a shared library that provides core components including user authentication, token-based authentication, common utilities, and shared Django applications used by both ADIT and RADIS projects.</p> <h2 id=high-level-architecture>High-Level Architecture<a class=headerlink href=#high-level-architecture title="Permanent link">&para;</a></h2> <p>The ADIT platform provides automated DICOM retrieval, transformation, and transfer through coordinated Docker containers. Users access the system via <strong>web browser</strong> or <strong>ADIT Client</strong> (Python library for programmatic access), performing operations such as creating transfer jobs, uploading DICOM files, and configuring destinations.</p> <p>The system consists of three main components: a Django API server handling web UI and orchestration, a PostgreSQL database storing all persistent data and serving as the task queue, and transfer workers executing DICOM operations in the background.</p> <h2 id=backend-architecture>Backend Architecture<a class=headerlink href=#backend-architecture title="Permanent link">&para;</a></h2> <p><strong>Django Web/API Server</strong>: Central coordination engine providing REST API endpoints, authentication, user/session management, static assets, and task orchestration. Creates job/task records in PostgreSQL and schedules background work.</p> <p><strong>PostgreSQL Database</strong>: System of record storing user accounts, transfer jobs, DICOM node configuration, task queue entries, execution history, and study metadata.</p> <p><strong>Transfer Workers</strong>: Docker containers polling PostgreSQL for tasks, executing C-GET/C-MOVE/DICOMweb operations, applying pseudonymization, and logging results.</p> <h3 id=procrastinate-task-queue-system>Procrastinate Task Queue System<a class=headerlink href=#procrastinate-task-queue-system title="Permanent link">&para;</a></h3> <p>ADIT uses <a href=https://procrastinate.readthedocs.io/en/stable/ >Procrastinate</a>, a PostgreSQL-based task queue storing jobs directly in the database without external message brokers. Tasks are Python functions with decorators, supporting job scheduling, prioritization, retry logic with exponential backoff, cancellation, and dead letter queues. Workers scale horizontally with configurable concurrency, graceful shutdown, and health monitoring.</p> <p><strong>ADIT Task Types</strong>: <code>process_dicom_task</code> (core transfers), <code>check_disk_space</code>, <code>backup_db</code>. Features include configurable timeouts (20-minute process timeout), concurrency control via queue management, complete job history and logs in PostgreSQL, retry logic with exponential backoff (max 3 attempts), and graceful error handling.</p> <h2 id=orthanc-integration>Orthanc Integration<a class=headerlink href=#orthanc-integration title="Permanent link">&para;</a></h2> <p>ADIT uses <a href=https://www.orthanc-server.com/index.php>Orthanc</a> (open-source DICOM server) as a development and testing tool. Bundled Orthanc instances provide mock PACS environments for local development, automated testing, and protocol validation. Supports full DIMSE (C-FIND, C-MOVE, C-GET, C-STORE) and DICOMweb (WADO-RS, QIDO-RS, STOW-RS) protocols.</p> <h2 id=dicom-libraries>DICOM Libraries<a class=headerlink href=#dicom-libraries title="Permanent link">&para;</a></h2> <p><strong><a href=https://pydicom.github.io/ >pydicom</a></strong>: Python library for reading, modifying, and writing DICOM files. ADIT uses it to work with DICOM datasets in memory (e.g., <code>from pydicom import Dataset</code>), parse DICOM tags, and convert DICOM data to other formats.</p> <p><strong><a href=https://pydicom.github.io/ >pynetdicom</a></strong>: Python implementation of DICOM networking protocols. ADIT uses it to communicate with remote PACS servers over the networkâ€”sending query requests (C-FIND), retrieving images (C-GET/C-MOVE), and accepting incoming DICOM transfers (C-STORE). It handles the low-level network communication while pydicom handles the DICOM file data.</p> <p><strong><a href=https://pypi.org/project/dicognito/ >dicognito</a></strong>: DICOM anonymization library used for pseudonymization of patient data. ADIT leverages <strong>dicognito</strong> to remove identifying information from DICOM headers, replace patient names/IDs with pseudonyms, and maintain consistency across multiple studies for the same patient. Under the hood, <strong>dicognito</strong> uses <strong>pydicom</strong>.</p> <h2 id=frontend-architecture>Frontend Architecture<a class=headerlink href=#frontend-architecture title="Permanent link">&para;</a></h2> <p>Server-side rendered with Django templates and HTMX for dynamic interactions. Uses Bootstrap 5 for styling and Alpine.js for interactive components.</p> <p><strong>ADIT Client</strong>: Python package (<code>adit-client</code>) for programmatic API access, supporting automated DICOM operations and returning pydicom datasets.</p> <h2 id=docker-container-architecture>Docker Container Architecture<a class=headerlink href=#docker-container-architecture title="Permanent link">&para;</a></h2> <p>ADIT runs as multiple Docker containers that work together. In development, these containers run inside a VS Code <strong>dev container</strong> which provides a consistent development environment with Docker-in-Docker support, allowing you to run and manage the application containers from within the development container.</p> <h3 id=container-types>Container Types<a class=headerlink href=#container-types title="Permanent link">&para;</a></h3> <p><strong>Web Container (<code>adit-web-1</code>)</strong>: Runs Django application serving web UI and REST API. Ports: 8000 (dev), 80/443 (prod with SSL). Handles authentication, serves static files, enqueues tasks, and manages database connections.</p> <p><strong>PostgreSQL Container (<code>adit-postgres-1</code>)</strong>: PostgreSQL 17 database storing all data (users, jobs, tasks, logs, Procrastinate queue). Port 5432. Uses Docker volumes for persistence.</p> <p><strong>Default Worker Container (<code>adit-default_worker-1</code>)</strong>: Processes background tasks in the default queue (e.g., disk space checks, database backups).</p> <p><strong>DICOM Worker Container (<code>adit-dicom_worker-1</code>)</strong>: Executes DICOM transfer tasks from the dicom queue. Same base image as web container plus DICOM tools. Multiple instances can run for scaling.</p> <p><strong>C-STORE Receiver Container (<code>adit-receiver-1</code>)</strong>: Accepts incoming DICOM data from C-MOVE operations. Ports: 11112 (DICOM), 14638 (file transmit). Forwards data to workers via TCP.</p> <p><strong>Orthanc Containers (<code>adit-orthanc1-1</code>, <code>adit-orthanc2-1</code>)</strong>: Development PACS instances for testing. Official Orthanc image. Ports 7501/7502 (dev only). Uses SQLite for development.</p> <h2 id=application-architecture>Application Architecture<a class=headerlink href=#application-architecture title="Permanent link">&para;</a></h2> <h3 id=core-django-apps-structure>Core Django Apps Structure<a class=headerlink href=#core-django-apps-structure title="Permanent link">&para;</a></h3> <h4 id=core-app-aditcore><strong>Core App</strong> (<code>adit.core</code>)<a class=headerlink href=#core-app-aditcore title="Permanent link">&para;</a></h4> <ul> <li><strong>Purpose</strong>: Foundation services and shared components</li> <li><strong>Components</strong>: User management, DICOM node configuration, base models, utilities</li> <li><strong>Key Features</strong>: Authentication, authorization, DICOM server management</li> </ul> <h4 id=transfer-apps><strong>Transfer Apps</strong><a class=headerlink href=#transfer-apps title="Permanent link">&para;</a></h4> <ul> <li><strong>Batch Transfer</strong> (<code>adit.batch_transfer</code>): Bulk data transfer operations</li> <li><strong>Selective Transfer</strong> (<code>adit.selective_transfer</code>): Individual study transfers</li> </ul> <h4 id=exploration-discovery><strong>Exploration &amp; Discovery</strong><a class=headerlink href=#exploration-discovery title="Permanent link">&para;</a></h4> <ul> <li><strong>DICOM Explorer</strong> (<code>adit.dicom_explorer</code>): Interactive DICOM data browsing</li> <li><strong>Batch Query</strong> (<code>adit.batch_query</code>): Bulk DICOM server queries</li> </ul> <h4 id=upload-system-aditupload><strong>Upload System</strong> (<code>adit.upload</code>)<a class=headerlink href=#upload-system-aditupload title="Permanent link">&para;</a></h4> <ul> <li><strong>File Upload</strong>: Direct DICOM file upload to ADIT</li> </ul> <h2 id=primary-models>Primary Models<a class=headerlink href=#primary-models title="Permanent link">&para;</a></h2> <h3 id=user-management>User Management<a class=headerlink href=#user-management title="Permanent link">&para;</a></h3> <ul> <li> <p><strong>Users &amp; Groups</strong>: Django authentication with group-based access. Each user has an active group that determines which reports they can access.</p> </li> <li> <p><strong>Permissions</strong>: Fine-grained access control for features (extractions, subscriptions, urgent priority).</p> </li> </ul> <h3 id=transfer-operations>Transfer Operations<a class=headerlink href=#transfer-operations title="Permanent link">&para;</a></h3> <p>Transfer Jobs define transfer operations with owner and status tracking, containing one or more Transfer Tasks that specify study/series/instance operations. Each task progresses through states: PENDING, IN_PROGRESS, SUCCESS, FAILURE, or CANCELED.</p> <h3 id=dicom-configuration>DICOM Configuration<a class=headerlink href=#dicom-configuration title="Permanent link">&para;</a></h3> <p>DICOM Servers represent remote PACS/Orthanc instances, with DICOM Nodes defining source and destination configurations. The system supports both DIMSE protocols (C-FIND, C-GET, C-MOVE, C-STORE) and DICOMweb REST APIs (QIDO-RS, WADO-RS, STOW-RS). Downloading data from a DICOM server can done by using a DIMSE operation or by using DICOMweb REST calls. When using DIMSE operations C-GET is prioritized over C-MOVE as a worker can fetch the DICOM data directly from the server. When downloading data using a C-MOVE operation, ADIT commands the source DICOM server to send the data to a C-STORE SCP server of ADIT running in a separate container (Receiver) that receives the DICOM data and sends it back to the worker using a TCP Socket connection (FileTransmitter).</p> <h2 id=related-projects>Related Projects<a class=headerlink href=#related-projects title="Permanent link">&para;</a></h2> <ul> <li><strong>ADIT Radis Shared</strong>: Common library providing authentication, utilities, and shared Django apps for ADIT and RADIS</li> </ul> <hr> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024-2025 CCI Bonn </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/openradx/adit target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://ccibonn.ai/ target=_blank rel=noopener title=ccibonn.ai class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M351.9 280H161c2.9 64.5 17.2 123.9 37.5 167.4 11.4 24.5 23.7 41.8 35.1 52.4 11.2 10.5 18.9 12.2 22.9 12.2s11.7-1.7 22.9-12.2c11.4-10.6 23.7-28 35.1-52.4 20.3-43.5 34.6-102.9 37.5-167.4zm-191-48h190.9c-2.8-64.5-17.1-123.9-37.4-167.4-11.4-24.4-23.7-41.8-35.1-52.4C268.1 1.7 260.4 0 256.4 0s-11.7 1.7-22.9 12.2c-11.4 10.6-23.7 28-35.1 52.4-20.3 43.5-34.6 102.9-37.5 167.4m-48 0c3.5-85.6 25.6-165.1 57.9-217.3C78.7 47.3 10.9 131.2 1.5 232zM1.5 280c9.4 100.8 77.2 184.7 169.3 217.3-32.3-52.2-54.4-131.7-57.9-217.3zm398.4 0c-3.5 85.6-25.6 165.1-57.9 217.3 92.1-32.7 159.9-116.5 169.3-217.3zm111.4-48C501.9 131.2 434.1 47.3 342 14.7c32.3 52.2 54.4 131.7 57.9 217.3z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.path", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "content.code.copy", "content.code.annotate", "content.action.edit", "content.action.view", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>